<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ระบบสมาชิกและสะสมแต้ม</title>
    <meta name="description" content="ระบบสะสมแต้ม" />
    <meta name="author" content="iton5" />
    <meta property="og:title" content="point-iton5-thailand" />
    <meta property="og:description" content="ระบบสะสมแต้ม" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lh3.googleusercontent.com/d/1Ck_OCfEW4dEp3A1k9yfQplYmW7qmwzFF" />

    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://bit.ly/fontiton5" type="text/css" charset="utf-8" />

    <style>
        :root {
            --color-beige: #bfb5af;
            --color-cream: #ece2d0;
            --color-pink: #d5b9b2;
            --color-rose: #a26769;
            --color-purple: #582c4d;
            --gradient-primary: linear-gradient(135deg, #9FCF1B 0%, #304705 100%);
            --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f557ce 100%);
            --gradient-accent: linear-gradient(135deg, #526372 0%, #a4b8b9 100%);
            --shadow-soft: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-medium: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-large: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'line_seed_sans_th';
        }

        body {
            background: linear-gradient(135deg, #9FCF1B 0%, #304705 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .background-decoration {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: -1;
        }

        .floating-shape {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            animation: float 6s ease-in-out infinite;
        }

        .floating-shape:nth-child(1) {
            width: 80px;
            height: 80px;
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }

        .floating-shape:nth-child(2) {
            width: 120px;
            height: 120px;
            top: 20%;
            right: 10%;
            animation-delay: 1s;
        }

        .floating-shape:nth-child(3) {
            width: 60px;
            height: 60px;
            bottom: 20%;
            left: 20%;
            animation-delay: 2s;
        }

        .floating-shape:nth-child(4) {
            width: 100px;
            height: 100px;
            bottom: 10%;
            right: 20%;
            animation-delay: 3s;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px) rotate(0deg);
            }

            50% {
                transform: translateY(-20px) rotate(10deg);
            }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 10;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: var(--shadow-large);
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: white;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
        }

        .mode-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .mode-btn {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 20px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .mode-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .main-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: var(--shadow-large);
            overflow: hidden;
            margin-bottom: 20px;
        }

        .tabs {
            display: flex;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 16px 16px 0 0;
            padding: 4px;
        }

        .tab {
            flex: 1;
            padding: 16px 20px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .tab.active {
            background: var(--gradient-primary);
            color: white;
            box-shadow: var(--shadow-soft);
            transform: translateY(-2px);
        }

        .tab-content {
            display: none;
            padding: 40px;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #374151;
            font-size: 0.95rem;
        }

        .form-input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
        }

        .form-input:focus {
            outline: none;
            border-color: #9FCF1B;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
            background: white;
        }

        .form-select {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            cursor: pointer;
        }

        .form-select:focus {
            outline: none;
            border-color: #9FCF1B;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
            background: white;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 12px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 12px 16px;
            border-radius: 12px;
            transition: all 0.3s ease;
            background: rgba(102, 126, 234, 0.05);
            border: 2px solid transparent;
        }

        .radio-option:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .radio-option input {
            margin-right: 8px;
            accent-color: #9FCF1B;
        }

        .radio-option input:checked+.radio-label {
            color: #9FCF1B;
            font-weight: 600;
        }

        .btn {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            position: relative;
            overflow: hidden;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: var(--gradient-secondary);
        }

        .btn-outline {
            background: transparent;
            color: #9FCF1B;
            border: 2px solid #9FCF1B;
        }

        .btn-outline:hover {
            background: #9FCF1B;
            color: white;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .points-display {
            background: var(--gradient-primary);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .points-display::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            animation: shimmer 3s linear infinite;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%) translateY(-100%) rotate(45deg);
            }

            100% {
                transform: translateX(100%) translateY(100%) rotate(45deg);
            }
        }

        .points-number {
            font-size: 4rem;
            font-weight: 700;
            margin: 20px 0;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 2;
        }

        .points-label {
            font-size: 1.2rem;
            opacity: 0.9;
            position: relative;
            z-index: 2;
        }

        .info-card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-soft);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .info-card h3 {
            color: #374151;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid #e5e7eb;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .info-row {
            display: flex;
            margin-bottom: 16px;
            padding: 12px 0;
            border-bottom: 1px solid #f3f4f6;
        }

        .info-row:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .info-label {
            flex: 1;
            font-weight: 600;
            color: #6b7280;
        }

        .info-value {
            flex: 2;
            color: #374151;
        }

        .qr-container {
            text-align: center;
            margin-top: 30px;
        }

        .qr-wrapper {
            display: inline-block;
            padding: 20px;
            background: white;
            border-radius: 16px;
            box-shadow: var(--shadow-medium);
            margin-bottom: 16px;
        }

        .qr-caption {
            color: #6b7280;
            font-size: 0.9rem;
        }

        .history-item {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: var(--shadow-soft);
            border-left: 4px solid #9FCF1B;
            transition: all 0.3s ease;
        }

        .history-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .history-date {
            color: #6b7280;
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .history-points {
            font-size: 1.2rem;
            font-weight: 600;
            color: #9FCF1B;
            margin-bottom: 8px;
        }

        .history-points.negative {
            color: #ef4444;
        }

        .history-desc {
            color: #374151;
            font-size: 0.95rem;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #9ca3af;
        }

        .empty-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            opacity: 0.5;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #e5e7eb;
            border-top: 4px solid #9FCF1B;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .alert {
            padding: 16px 20px;
            border-radius: 12px;
            margin: 20px 0;
            display: none;
            align-items: center;
            gap: 12px;
        }

        .alert.show {
            display: flex;
        }

        .alert-success {
            background: rgba(34, 197, 94, 0.1);
            color: #166534;
            border: 1px solid rgba(34, 197, 94, 0.2);
        }

        .alert-error {
            background: rgba(239, 68, 68, 0.1);
            color: #991b1b;
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        .admin-login {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: var(--shadow-large);
        }

        .admin-dashboard {
            display: none;
        }

        .admin-dashboard.show {
            display: block;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 16px;
            box-shadow: var(--shadow-soft);
        }

        .admin-tabs {
            display: flex;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 16px;
            padding: 4px;
            margin-bottom: 30px;
        }

        .admin-tab {
            flex: 1;
            padding: 12px 16px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .admin-tab.active {
            background: var(--gradient-primary);
            color: white;
            box-shadow: var(--shadow-soft);
        }

        .admin-content {
            display: none;
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: var(--shadow-soft);
        }

        .admin-content.active {
            display: block;
        }

        .search-box {
            display: flex;
            gap: 12px;
            margin-bottom: 30px;
        }

        .member-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-soft);
            border-left: 4px solid #9FCF1B;
        }

        .member-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 12px;
        }

        .member-points {
            font-size: 1.1rem;
            font-weight: 600;
            color: #9FCF1B;
            margin-bottom: 16px;
        }

        .add-points-form {
            background: rgba(102, 126, 234, 0.05);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .form-row {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .table th {
            background: rgba(102, 126, 234, 0.1);
            padding: 16px 12px;
            text-align: left;
            font-weight: 600;
            color: #374151;
            border-bottom: 2px solid #e5e7eb;
        }

        .table td {
            padding: 16px 12px;
            border-bottom: 1px solid #e5e7eb;
            color: #374151;
        }

        .table tr:hover {
            background: rgba(102, 126, 234, 0.02);
        }

        .scan-section {
            text-align: center;
            margin: 30px 0;
            padding: 30px;
            background: rgba(102, 126, 234, 0.05);
            border-radius: 16px;
            border: 2px dashed rgba(102, 126, 234, 0.3);
        }

        @media (max-width: 768px) {
            .container {
                padding: 16px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .tab-content {
                padding: 24px;
            }

            .points-number {
                font-size: 3rem;
            }

            .form-row {
                flex-direction: column;
            }

            .search-box {
                flex-direction: column;
            }

            .radio-group {
                flex-direction: column;
                gap: 12px;
            }

            .admin-header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }

            .table {
                font-size: 0.9rem;
            }

            .table th,
            .table td {
                padding: 12px 8px;
            }
        }

        .hide {
            display: none !important;
        }
    </style>
</head>

<body>
    <div class="background-decoration">
        <div class="floating-shape"></div>
        <div class="floating-shape"></div>
        <div class="floating-shape"></div>
        <div class="floating-shape"></div>
    </div>

    <div class="mode-toggle">
        <button class="mode-btn" id="mode-toggle-btn">
            <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                <path
                    d="M6 2c-1.10457 0-2 .89543-2 2v4c0 .55228.44772 1 1 1s1-.44772 1-1V4h12v7h-2c-.5523 0-1 .4477-1 1v2h-1c-.5523 0-1 .4477-1 1s.4477 1 1 1h5c.5523 0 1-.4477 1-1V3.85714C20 2.98529 19.3667 2 18.268 2H6Z" />
                <path
                    d="M6 11.5C6 9.567 7.567 8 9.5 8S13 9.567 13 11.5 11.433 15 9.5 15 6 13.433 6 11.5ZM4 20c0-2.2091 1.79086-4 4-4h3c2.2091 0 4 1.7909 4 4 0 1.1046-.8954 2-2 2H6c-1.10457 0-2-.8954-2-2Z" />
            </svg>

            <span id="mode-text">Admin</span>
        </button>
    </div>

    <div id="member-mode" class="container">
        <div class="header">
            <h1>iton5 membership</h1>
            <p>ลงทะเบียนและสะสมแต้มเพื่อรับสิทธิพิเศษ</p>
        </div>

        <div class="main-card">
            <div class="tabs">
                <button class="tab active" data-tab="register">
                    <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                        viewBox="0 0 24 24">
                        <path fill-rule="evenodd"
                            d="M9 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm-2 9a4 4 0 0 0-4 4v1a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-1a4 4 0 0 0-4-4H7Zm8-1a1 1 0 0 1 1-1h1v-1a1 1 0 1 1 2 0v1h1a1 1 0 1 1 0 2h-1v1a1 1 0 1 1-2 0v-1h-1a1 1 0 0 1-1-1Z"
                            clip-rule="evenodd" />
                    </svg>

                    ลงทะเบียน
                </button>
                <button class="tab" data-tab="points">
                    <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                        viewBox="0 0 24 24">
                        <path d="M11 9a1 1 0 1 1 2 0 1 1 0 0 1-2 0Z" />
                        <path fill-rule="evenodd"
                            d="M9.896 3.051a2.681 2.681 0 0 1 4.208 0c.147.186.38.282.615.255a2.681 2.681 0 0 1 2.976 2.975.681.681 0 0 0 .254.615 2.681 2.681 0 0 1 0 4.208.682.682 0 0 0-.254.615 2.681 2.681 0 0 1-2.976 2.976.681.681 0 0 0-.615.254 2.682 2.682 0 0 1-4.208 0 .681.681 0 0 0-.614-.255 2.681 2.681 0 0 1-2.976-2.975.681.681 0 0 0-.255-.615 2.681 2.681 0 0 1 0-4.208.681.681 0 0 0 .255-.615 2.681 2.681 0 0 1 2.976-2.975.681.681 0 0 0 .614-.255ZM12 6a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z"
                            clip-rule="evenodd" />
                        <path
                            d="M5.395 15.055 4.07 19a1 1 0 0 0 1.264 1.267l1.95-.65 1.144 1.707A1 1 0 0 0 10.2 21.1l1.12-3.18a4.641 4.641 0 0 1-2.515-1.208 4.667 4.667 0 0 1-3.411-1.656Zm7.269 2.867 1.12 3.177a1 1 0 0 0 1.773.224l1.144-1.707 1.95.65A1 1 0 0 0 19.915 19l-1.32-3.93a4.667 4.667 0 0 1-3.4 1.642 4.643 4.643 0 0 1-2.53 1.21Z" />
                    </svg>

                    คะแนนสะสม
                </button>
                <button class="tab" data-tab="history">
                    <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                        <path stroke="currentColor" stroke-linecap="round" stroke-width="2"
                            d="M5 7h14M5 12h14M5 17h14" />
                    </svg>

                    ประวัติ
                </button>
            </div>

            <div id="register" class="tab-content active">
                <form id="registration-form">
                    <div class="form-group">
                        <label class="form-label" for="name">ชื่อ-นามสกุล *</label>
                        <input type="text" id="name" name="name" class="form-input" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="phone">เบอร์โทรศัพท์ *</label>
                        <input type="tel" id="phone" name="phone" class="form-input" pattern="[0-9]{10}" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="email">อีเมล</label>
                        <input type="email" id="email" name="email" class="form-input">
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="birthdate">วันเกิด</label>
                        <input type="date" id="birthdate" name="birthdate" class="form-input">
                    </div>

                    <div class="form-group">
                        <label class="form-label">เพศ</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="gender" value="male" checked>
                                <span class="radio-label">ชาย</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="gender" value="female">
                                <span class="radio-label">หญิง</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="gender" value="other">
                                <span class="radio-label">อื่นๆ</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="source">รู้จักเราจากช่องทางไหน</label>
                        <select id="source" name="source" class="form-select">
                            <option value="">-- โปรดเลือก --</option>
                            <option value="facebook">Facebook</option>
                            <option value="instagram">Instagram</option>
                            <option value="line">LINE</option>
                            <option value="friend">เพื่อนแนะนำ</option>
                            <option value="other">อื่นๆ</option>
                        </select>
                    </div>

                    <input type="hidden" id="line-id" name="lineId">
                    <input type="hidden" id="line-name" name="lineName">
                    <input type="hidden" id="line-picture" name="linePicture">

                    <button type="submit" class="btn" id="submit-btn">
                        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                            viewBox="0 0 24 24">
                            <path fill-rule="evenodd"
                                d="M9 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm-2 9a4 4 0 0 0-4 4v1a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-1a4 4 0 0 0-4-4H7Zm8-1a1 1 0 0 1 1-1h1v-1a1 1 0 1 1 2 0v1h1a1 1 0 1 1 0 2h-1v1a1 1 0 1 1-2 0v-1h-1a1 1 0 0 1-1-1Z"
                                clip-rule="evenodd" />
                        </svg>

                        ลงทะเบียน
                    </button>
                </form>

                <div class="loading" id="registration-loading">
                    <div class="spinner"></div>
                    <p>กำลังดำเนินการ...</p>
                </div>

                <div class="alert alert-success" id="registration-success">
                    <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                        viewBox="0 0 24 24">
                        <path fill-rule="evenodd"
                            d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm13.707-1.293a1 1 0 0 0-1.414-1.414L11 12.586l-1.793-1.793a1 1 0 0 0-1.414 1.414l2.5 2.5a1 1 0 0 0 1.414 0l4-4Z"
                            clip-rule="evenodd" />
                    </svg>


                    <span>ลงทะเบียนสำเร็จ! คุณได้รับ 100 แต้มเริ่มต้น</span>
                </div>

                <div class="alert alert-error" id="registration-error">
                    <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                        viewBox="0 0 24 24">
                        <path fill-rule="evenodd"
                            d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm7.707-3.707a1 1 0 0 0-1.414 1.414L10.586 12l-2.293 2.293a1 1 0 1 0 1.414 1.414L12 13.414l2.293 2.293a1 1 0 0 0 1.414-1.414L13.414 12l2.293-2.293a1 1 0 0 0-1.414-1.414L12 10.586 9.707 8.293Z"
                            clip-rule="evenodd" />
                    </svg>

                    <span>เกิดข้อผิดพลาด โปรดลองอีกครั้ง</span>
                </div>
            </div>

            <div id="points" class="tab-content">
                <div class="points-display">
                    <h2>แต้มสะสมของคุณ</h2>
                    <div class="points-number" id="total-points">0</div>
                    <p class="points-label">สะสมแต้มเพื่อรับสิทธิพิเศษ</p>
                </div>

                <div class="info-card">
                    <h3>ข้อมูลสมาชิก</h3>
                    <div class="info-row">
                        <div class="info-label">ชื่อ:</div>
                        <div class="info-value" id="member-name">-</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">เบอร์โทรศัพท์:</div>
                        <div class="info-value" id="member-phone">-</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">อีเมล:</div>
                        <div class="info-value" id="member-email">-</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">วันที่ลงทะเบียน:</div>
                        <div class="info-value" id="member-date">-</div>
                    </div>
                </div>

                <div class="qr-container">
                    <h3>QR Code สมาชิก</h3>
                    <div class="qr-wrapper">
                        <div id="member-qr-code"></div>
                    </div>
                    <p class="qr-caption">แสดง QR Code นี้ให้พนักงานสแกนเพื่อรับแต้ม</p>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-secondary" id="member-scan-qr-btn" style="width: auto;">
                        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linejoin="round" stroke-width="2"
                                d="M4 4h6v6H4V4Zm10 10h6v6h-6v-6Zm0-10h6v6h-6V4Zm-4 10h.01v.01H10V14Zm0 4h.01v.01H10V18Zm-3 2h.01v.01H7V20Zm0-4h.01v.01H7V16Zm-3 2h.01v.01H4V18Zm0-4h.01v.01H4V14Z" />
                            <path stroke="currentColor" stroke-linejoin="round" stroke-width="2"
                                d="M7 7h.01v.01H7V7Zm10 10h.01v.01H17V17Z" />
                        </svg>

                        สแกน QR Code เพื่อรับแต้ม
                    </button>
                </div>
                <div class="alert alert-success hide" id="member-scan-success" style="margin-top: 20px;">
                    <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                        viewBox="0 0 24 24">
                        <path fill-rule="evenodd"
                            d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm13.707-1.293a1 1 0 0 0-1.414-1.414L11 12.586l-1.793-1.793a1 1 0 0 0-1.414 1.414l2.5 2.5a1 1 0 0 0 1.414 0l4-4Z"
                            clip-rule="evenodd" />
                    </svg>

                    <span id="member-scan-success-msg">รับแต้มสำเร็จ!</span>
                </div>
                <div class="alert alert-error hide" id="member-scan-error" style="margin-top: 20px;">
                    <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                        viewBox="0 0 24 24">
                        <path fill-rule="evenodd"
                            d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm9.408-5.5a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2h-.01ZM10 10a1 1 0 1 0 0 2h1v3h-1a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2h-1v-4a1 1 0 0 0-1-1h-2Z"
                            clip-rule="evenodd" />
                    </svg>

                    <span id="member-scan-error-msg">เกิดข้อผิดพลาดในการรับแต้ม</span>
                </div>

            </div>

            <div id="history" class="tab-content">
                <h3 style="margin-bottom: 30px; color: #374151; font-size: 1.5rem;">ประวัติการสะสมแต้ม</h3>
                <div id="history-list">
                    <div class="empty-state">
                        <div class="empty-icon">
                            <svg class="w-96 h-96 text-gray-800 dark:text-white" aria-hidden="true"
                                xmlns="http://www.w3.org/2000/svg" width="80" height="80" fill="none"
                                viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M4 10h16M8 14h8m-4-7V4M7 7V4m10 3V4M5 20h14a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1Z" />
                            </svg>

                        </div>
                        <p>ยังไม่มีประวัติการสะสมแต้ม</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="admin-mode" class="container hide">
        <div class="header">
            <h1>CMS for Admin</h1>
            <p>สำหรับแอดมินในการจัดการสมาชิก</p>
        </div>

        <div id="admin-login" class="admin-login">
            <h2 style="text-align: center; margin-bottom: 30px; color: #374151;">เข้าสู่ระบบ Admin</h2>
            <form id="admin-login-form">
                <div class="form-group" hidden>
                    <label class="form-label" for="admin-username">ชื่อผู้ใช้</label>
                    <input type="text" id="admin-username" name="username" class="form-input" disabled>
                </div>
                <div class="form-group">
                    <label class="form-label" for="admin-password">รหัสผ่าน <span id="toggle-password"
                            aria-label="Toggle password visibility" role="button" tabindex="0">
                            🙉
                        </span></label>
                    <input type="password" id="admin-password" name="password" class="form-input" required>

                </div>
                <button type="submit" class="btn">
                    <svg class="w-[24px] h-[24px] text-gray-800 dark:text-white" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M16 12H4m12 0-4 4m4-4-4-4m3-4h2a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-2" />
                    </svg>

                    เข้าสู่ระบบ
                </button>
            </form>



            <div class="alert alert-error" id="admin-login-error">
                <svg class="w-[24px] h-[24px] text-gray-800 dark:text-white" aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="m15 9-6 6m0-6 6 6m6-3a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                </svg>

                <span>ชื่อผู้ใช้หรือรหัสผ่านไม่ถูกต้อง</span>
            </div>
        </div>

        <div id="admin-dashboard" class="admin-dashboard">
            <div class="admin-header">
                <h2>ระบบจัดการสมาชิก</h2>
                <button class="btn btn-outline" id="logout-btn">
                    <svg class="w-[24px] h-[24px] text-gray-800 dark:text-white" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M20 12H8m12 0-4 4m4-4-4-4M9 4H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h2" />
                    </svg>

                    ออกจากระบบ
                </button>
            </div>

            <div class="admin-tabs">
                <button class="admin-tab active" data-tab="add-points">
                    <svg class="w-[24px] h-[24px] text-gray-800 dark:text-white" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                        viewBox="0 0 24 24">
                        <path d="M11 9a1 1 0 1 1 2 0 1 1 0 0 1-2 0Z" />
                        <path fill-rule="evenodd"
                            d="M9.896 3.051a2.681 2.681 0 0 1 4.208 0c.147.186.38.282.615.255a2.681 2.681 0 0 1 2.976 2.975.681.681 0 0 0 .254.615 2.681 2.681 0 0 1 0 4.208.682.682 0 0 0-.254.615 2.681 2.681 0 0 1-2.976 2.976.681.681 0 0 0-.615.254 2.682 2.682 0 0 1-4.208 0 .681.681 0 0 0-.614-.255 2.681 2.681 0 0 1-2.976-2.975.681.681 0 0 0-.255-.615 2.681 2.681 0 0 1 0-4.208.681.681 0 0 0 .255-.615 2.681 2.681 0 0 1 2.976-2.975.681.681 0 0 0 .614-.255ZM12 6a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z"
                            clip-rule="evenodd" />
                        <path
                            d="M5.395 15.055 4.07 19a1 1 0 0 0 1.264 1.267l1.95-.65 1.144 1.707A1 1 0 0 0 10.2 21.1l1.12-3.18a4.641 4.641 0 0 1-2.515-1.208 4.667 4.667 0 0 1-3.411-1.656Zm7.269 2.867 1.12 3.177a1 1 0 0 0 1.773.224l1.144-1.707 1.95.65A1 1 0 0 0 19.915 19l-1.32-3.93a4.667 4.667 0 0 1-3.4 1.642 4.643 4.643 0 0 1-2.53 1.21Z" />
                    </svg>


                    เพิ่มแต้ม
                </button>
                <button class="admin-tab" data-tab="generate-qr">
                    <svg class="w-[24px] h-[24px] text-gray-800 dark:text-white" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                        <path stroke="currentColor" stroke-linejoin="round" stroke-width="2"
                            d="M4 4h6v6H4V4Zm10 10h6v6h-6v-6Zm0-10h6v6h-6V4Zm-4 10h.01v.01H10V14Zm0 4h.01v.01H10V18Zm-3 2h.01v.01H7V20Zm0-4h.01v.01H7V16Zm-3 2h.01v.01H4V18Zm0-4h.01v.01H4V14Z" />
                        <path stroke="currentColor" stroke-linejoin="round" stroke-width="2"
                            d="M7 7h.01v.01H7V7Zm10 10h.01v.01H17V17Z" />
                    </svg>

                    สร้าง QR Code
                </button>
                <button class="admin-tab" data-tab="members-list">
                    <svg class="w-[24px] h-[24px] text-gray-800 dark:text-white" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                        viewBox="0 0 24 24">
                        <path fill-rule="evenodd"
                            d="M2 6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6Zm4.996 2a1 1 0 0 0 0 2h.01a1 1 0 1 0 0-2h-.01ZM11 8a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Zm-4.004 3a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2h-.01ZM11 11a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Zm-4.004 3a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2h-.01ZM11 14a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"
                            clip-rule="evenodd" />
                    </svg>

                    รายชื่อสมาชิก
                </button>
            </div>

            <div id="add-points" class="admin-content active">
                <div class="search-box">
                    <input type="tel" id="search-phone" class="form-input" placeholder="ค้นหาจากเบอร์โทรศัพท์"
                        pattern="[0-9]{10}">
                    <button class="btn" id="search-btn" style="width: auto;">
                        <svg class="w-[24px] h-[24px] text-gray-800 dark:text-white" aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-width="2"
                                d="m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z" />
                        </svg>

                        ค้นหา
                    </button>
                </div>

                <div class="scan-section">
                    <button class="btn btn-secondary" id="scan-qr-btn" style="width: auto;">
                        <svg class="w-[24px] h-[24px] text-gray-800 dark:text-white" aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linejoin="round" stroke-width="2"
                                d="M4 4h6v6H4V4Zm10 10h6v6h-6v-6Zm0-10h6v6h-6V4Zm-4 10h.01v.01H10V14Zm0 4h.01v.01H10V18Zm-3 2h.01v.01H7V20Zm0-4h.01v.01H7V16Zm-3 2h.01v.01H4V18Zm0-4h.01v.01H4V14Z" />
                            <path stroke="currentColor" stroke-linejoin="round" stroke-width="2"
                                d="M7 7h.01v.01H7V7Zm10 10h.01v.01H17V17Z" />
                        </svg>

                        สแกน QR Code สมาชิก
                    </button>
                </div>

                <div id="member-result" class="hide">
                    <div class="member-card">
                        <div class="member-name" id="result-name">ชื่อสมาชิก</div>
                        <div class="member-points">แต้มปัจจุบัน: <span id="result-points">0</span> แต้ม</div>

                        <div class="info-row">
                            <div class="info-label">เบอร์โทรศัพท์:</div>
                            <div class="info-value" id="result-phone">-</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">อีเมล:</div>
                            <div class="info-value" id="result-email">-</div>
                        </div>

                        <div class="add-points-form">
                            <h4 style="margin-bottom: 20px; color: #374151;">เพิ่มแต้ม</h4>
                            <form id="add-points-form-admin"> <input type="hidden" id="member-line-id" name="lineId">
                                <div class="form-row">
                                    <input type="number" id="points-amount" name="points" class="form-input"
                                        placeholder="จำนวนแต้ม" required min="1">
                                    <input type="text" id="points-desc" name="description" class="form-input"
                                        placeholder="รายละเอียด (ไม่บังคับ)">
                                    <button type="submit" class="btn" style="width: auto;">
                                        <svg class="w-[24px] h-[24px] text-gray-800 dark:text-white" aria-hidden="true"
                                            xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
                                            viewBox="0 0 24 24">
                                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                                stroke-width="2"
                                                d="M12 7.757v8.486M7.757 12h8.486M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                                        </svg>

                                        เพิ่มแต้ม
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="alert alert-success hide" id="scan-result">
                    <i data-lucide="check-circle"></i>
                    <div>
                        <div>สแกนสำเร็จ! +<span id="scanned-points">0</span> แต้ม</div>
                        <div id="scan-desc" style="margin-top: 8px; font-size: 0.9rem;">รายละเอียดการเพิ่มแต้ม</div>
                        <button class="btn" id="confirm-scan-btn" style="margin-top: 16px; width: auto;">
                            ยืนยันการเพิ่มแต้ม
                        </button>
                    </div>
                </div>
            </div>

            <div id="generate-qr" class="admin-content">
                <h3 style="margin-bottom: 30px; color: #374151;">สร้าง QR Code สำหรับเพิ่มแต้ม</h3>

                <form id="qr-generator-form">
                    <div class="form-group">
                        <label class="form-label" for="qr-points">จำนวนแต้ม</label>
                        <input type="number" id="qr-points" name="points" class="form-input" required min="1">
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="qr-desc">รายละเอียด</label>
                        <input type="text" id="qr-desc" name="description" class="form-input"
                            placeholder="เช่น โปรโมชั่นพิเศษ, กิจกรรม, ฯลฯ">
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="qr-expiry">วันหมดอายุ (ไม่บังคับ)</label>
                        <input type="date" id="qr-expiry" name="expiry" class="form-input">
                    </div>

                    <button type="submit" class="btn">
                        <svg class="w-[24px] h-[24px] text-gray-800 dark:text-white" aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linejoin="round" stroke-width="2"
                                d="M4 4h6v6H4V4Zm10 10h6v6h-6v-6Zm0-10h6v6h-6V4Zm-4 10h.01v.01H10V14Zm0 4h.01v.01H10V18Zm-3 2h.01v.01H7V20Zm0-4h.01v.01H7V16Zm-3 2h.01v.01H4V18Zm0-4h.01v.01H4V14Z" />
                            <path stroke="currentColor" stroke-linejoin="round" stroke-width="2"
                                d="M7 7h.01v.01H7V7Zm10 10h.01v.01H17V17Z" />
                        </svg>

                        สร้าง QR Code
                    </button>
                </form>

                <div class="qr-container hide" id="qr-code-container">
                    <h4 style="margin-bottom: 20px; color: #374151;">QR Code สำหรับเพิ่มแต้ม</h4>
                    <div class="qr-wrapper">
                        <div id="generated-qr-code"></div>
                    </div>
                    <p class="qr-caption">สแกน QR Code นี้เพื่อเพิ่มแต้มให้กับสมาชิก</p>
                    <button class="btn btn-outline" id="download-qr-btn" style="width: auto; margin-top: 20px;">
                        <svg class="w-[24px] h-[24px] text-gray-800 dark:text-white" aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                            viewBox="0 0 24 24">
                            <path fill-rule="evenodd"
                                d="M13 11.15V4a1 1 0 1 0-2 0v7.15L8.78 8.374a1 1 0 1 0-1.56 1.25l4 5a1 1 0 0 0 1.56 0l4-5a1 1 0 1 0-1.56-1.25L13 11.15Z"
                                clip-rule="evenodd" />
                            <path fill-rule="evenodd"
                                d="M9.657 15.874 7.358 13H5a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2.358l-2.3 2.874a3 3 0 0 1-4.685 0ZM17 16a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2H17Z"
                                clip-rule="evenodd" />
                        </svg>

                        ดาวน์โหลด QR Code
                    </button>
                </div>
            </div>

            <div id="members-list" class="admin-content">
                <h3 style="margin-bottom: 30px; color: #374151;">รายชื่อสมาชิกทั้งหมด</h3>

                <div style="overflow-x: auto;">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ชื่อ-นามสกุล</th>
                                <th>เบอร์โทรศัพท์</th>
                                <th>อีเมล</th>
                                <th>วันที่ลงทะเบียน</th>
                                <th>แต้มสะสม</th>
                            </tr>
                        </thead>
                        <tbody id="members-table-body">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
const _0x284688=_0x548c;(function(_0x4364dc,_0x215fda){const _0x45cdb9=_0x548c,_0xb4799b=_0x4364dc();while(!![]){try{const _0x1d1371=parseInt(_0x45cdb9(0xe1))/0x1*(parseInt(_0x45cdb9(0x155))/0x2)+parseInt(_0x45cdb9(0x17c))/0x3+parseInt(_0x45cdb9(0x171))/0x4+parseInt(_0x45cdb9(0x13f))/0x5+parseInt(_0x45cdb9(0x116))/0x6+-parseInt(_0x45cdb9(0x9e))/0x7+parseInt(_0x45cdb9(0x159))/0x8*(-parseInt(_0x45cdb9(0xc0))/0x9);if(_0x1d1371===_0x215fda)break;else _0xb4799b['push'](_0xb4799b['shift']());}catch(_0x1bdf87){_0xb4799b['push'](_0xb4799b['shift']());}}}(_0x5129,0xf24fc));let currentMode=_0x284688(0x135),currentMember=null,isAdminLoggedIn=![];const API_URL=_0x284688(0x93),LIFF_ID=_0x284688(0xd1),Toast=Swal['mixin']({'toast':!![],'position':_0x284688(0x172),'showConfirmButton':![],'timer':0xbb8,'timerProgressBar':!![],'didOpen':_0x2aa1e4=>{const _0x2565d2=_0x284688;_0x2aa1e4['onmouseenter']=Swal[_0x2565d2(0x8e)],_0x2aa1e4[_0x2565d2(0x7a)]=Swal[_0x2565d2(0x16a)];}});function _0x5129(){const _0x356ff3=['username','preventDefault','LIFF\x20SDK\x20not\x20found,\x20running\x20in\x20demo\x20mode','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','line-name','getAttribute','เกิดข้อผิดพลาดในการเพิ่มแต้ม','numeric','Admin','member-line-id','กำลังโหลดข้อมูล..','code','admin-password','points','#generated-qr-code\x20canvas','text','2007356106-6OnL7B5G','add','warn','เกิดข้อผิดพลาดในการค้นหาสมาชิก','login','เพิ่มแต้มโดยแอดมิน','Error\x20fetching\x20members:','ฟังก์ชันสแกน\x20QR\x20Code\x20ใช้ได้เฉพาะใน\x20LINE\x20เท่านั้น','line-id','userId','admin-dashboard','stringify','fire','DOMContentLoaded','รับ\x20','scan-qr-btn','1uLRTvP','width','กรุณาค้นหาสมาชิกก่อน','isInClient','undefined','email','entries','Send\x20Message\x20Success!','\x20แต้มสำเร็จ!','\x20น.</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22font-weight:\x20600;\x20color:\x20#667eea;\x22>','Error\x20scanning\x20code\x20(admin):','src','.png','\x20แต้ม</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','charCodeAt','\x20แต้ม</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22history-desc\x22>','admin-login','เกิดข้อผิดพลาดในการตรวจสอบ\x20QR\x20Code\x20สมาชิก','&size=128x128','lineId','การทำรายการ','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','#generated-qr-code\x20img','กำลังโหลด..','เกิดข้อผิดพลาดในการโหลดรายชื่อสมาชิก','history-item','โปรดค้นหาและเลือกสมาชิกก่อนยืนยันการเพิ่มแต้ม','member-result','download-qr-btn','points-desc','textContent','.alert.show','&size=200x200','mode-text','short','info','mode-toggle-btn','type','รับแต้มจาก\x20QR\x20Code','registrationDate','result-name','close','append','member-name','.history-item','init','admin','กรุณากรอกเบอร์โทรศัพท์\x2010\x20หลักให้ถูกต้อง','.tab','\x20น.','SCAN_CANCELED','exists','hideLoading','4752834oZMkuh','admin-username','member-email','negative','innerHTML','alert-success','member-date','now','getAllMembers','Error\x20while\x20loading:','Error\x20parsing\x20scanned\x20QR\x20for\x20member:','forEach','member-scan-qr-btn','getTime','remove','https://line.me/R/ti/p/@201gluvz','none','qr-generator-form','description','ดำเนินการสำเร็จ!','toLocaleString','เกิดข้อผิดพลาดในการเชื่อมต่อเพื่อเพิ่มแต้ม','.empty-state','qr-points','Error\x20getting\x20profile','result-points','เกิดข้อผิดพลาด\x20โปรดลองอีกครั้ง','show','alert','member-scan-error','getProfile','member','โปรดรอสักครู่...','log','appendChild','map','scanCode','findMemberByPhone','POST','scanned-points','ไม่สามารถระบุข้อมูลสมาชิกได้\x20โปรดลองอีกครั้ง','1777400asVRnl','toLocaleDateString','points-qr-','member-phone','โปรดรอสักครู่','QR\x20Code\x20ไม่ถูกต้องหรือไม่ใช่สำหรับรับแต้ม','toggle-password','parse','toDataURL','name','members-list','mixin','Error\x20adding\x20points\x20from\x20member\x20scan:','custom','ios','<tr><td\x20colspan=\x225\x22\x20style=\x22text-align:center;\x20color:red;\x20padding:20px;\x22>','querySelectorAll','ผิดพลาดในการเพิ่มแต้ม!','style','Error:','click','line-picture','3010558wRQkbC','toISOString','querySelector','getOS','1360TeAVEM','search-btn','download','scan-result','warning','message','total-points','web','ชื่อผู้ใช้หรือรหัสผ่านไม่ถูกต้อง','addPoints','Member','getFriendship','then','application/x-www-form-urlencoded','registration-form','hide','checkMember','resumeTimer','img','android','<tr><td\x20colspan=\x225\x22\x20style=\x22text-align:center;\x20color:red;\x20padding:20px;\x22>เกิดข้อผิดพลาดในการเชื่อมต่อ</td></tr>','history-list','QR\x20Code\x20นี้หมดอายุแล้วนะ','ส่งเข้าแชทเรียบร้อย','7065432LMbDQh','top-end','2-digit','registration-error','showLoading','shareTargetPicker','<tr><td\x20colspan=\x225\x22\x20style=\x22text-align:center;\x20padding:20px;\x22>ไม่พบข้อมูลสมาชิก</td></tr>','qr-code-container','กรุณาค้นหาสมาชิกก่อนที่จะใช้\x20QR\x20Code\x20แต้มสะสม','getDecodedIDToken','action','4403271FVwkCj','add-points','search-phone','date','Error\x20processing\x20scanned\x20member\x20ID\x20QR:','ไม่สามารถดาวน์โหลด\x20QR\x20Code\x20ได้\x20โปรดสร้าง\x20QR\x20Code\x20ก่อน','data-tab','QR\x20Code','onmouseleave','register','displayName','isVisible','เพิ่มแต้มสำเร็จ!','createElement','scan-desc','success','.admin-tab','height','เดี๋ยวก่อน!','TargetPicker\x20was\x20closed!','addEventListener','generated-qr-code','เกิดข้อผิดพลาดในการสแกน\x20QR\x20Code','catch','.tab-content','ไม่สามารถอ่านข้อมูลจาก\x20QR\x20Code\x20ได้','decode','.admin-content','stopTimer','classList','confirm-scan-btn','value','จำนวนแต้มจาก\x20QR\x20Code\x20ไม่ถูกต้อง','https://script.google.com/macros/s/AKfycbwnp_1dwZ3teZJ3BLPvrwvnpCWK9gICXRwmKdEnb8pHY-MabvcYU4Wh3xaYzTMyshbv/exec','admin-login-error','href','https://placehold.co/100x100/7F7F7F/FFFFFF?text=User','alt','LIFF\x20initialization\x20failed','registration-success','result-email','Error\x20loading\x20members:','pictureUrl','qr-expiry','10215205xaMzrY','scanCodeV2','alert-error','member-mode','members','json','Error\x20confirming\x20scan\x20points:','fromCharCode','points-amount','active','password','<p\x20style=\x22font-size:0.8em;\x20color:red;\x22>No\x20Line\x20ID\x20provided.</p>','Error\x20scanning\x20code\x20(member):','span','phone','setHours','block','เกิดข้อผิดพลาดในการเชื่อมต่อ','submit','getElementById','length','https://api.qrserver.com/v1/create-qr-code/?data=','history','ไม่พบสมาชิกจากเบอร์โทรศัพท์นี้','LIFF\x20is\x20not\x20in\x20LINE\x20client.','expiry','th-TH','admin-mode','error','ไม่พบข้อมูลสมาชิกจาก\x20QR\x20Code\x20นี้\x20หรือ\x20QR\x20Code\x20ไม่ถูกต้อง','display','กรุณากรอกจำนวนแต้มที่ถูกต้อง','Error\x20formatting\x20date:','test','181863hipoVR'];_0x5129=function(){return _0x356ff3;};return _0x5129();}document[_0x284688(0x86)](_0x284688(0xde),function(){const _0xf7b3b8=_0x284688;Swal[_0xf7b3b8(0xdd)]({'title':_0xf7b3b8(0x143),'text':_0xf7b3b8(0xcb),'allowOutsideClick':![],'allowEscapeKey':![],'didOpen':()=>{const _0x55e02d=_0xf7b3b8;Swal[_0x55e02d(0x175)]();}});try{initializeLiff(),setupTabNavigation(),setupFormSubmission(),setupAdminFunctions(),setupModeSwitch(),setupMemberScanQRButton(),setTimeout(()=>{const _0x4986a5=_0xf7b3b8;Swal[_0x4986a5(0x7d)]()&&Swal['isLoading']()&&(Swal[_0x4986a5(0x115)](),Swal[_0x4986a5(0x10a)]());},0x1770);}catch(_0x1ab114){console[_0xf7b3b8(0xba)](_0xf7b3b8(0x11f),_0x1ab114);}});function showAlert(_0x2a094d,_0x3eb14b,_0x667b05){const _0xc171ff=_0x284688,_0x476d30=document[_0xc171ff(0xb1)](_0x2a094d),_0x437ea7=_0x476d30[_0xc171ff(0x157)](_0xc171ff(0xab));_0x437ea7[_0xc171ff(0xff)]=_0x3eb14b,_0x476d30[_0xc171ff(0x8f)]['remove']('alert-success','alert-error'),_0x476d30['classList'][_0xc171ff(0xd2)](_0x667b05?_0xc171ff(0x11b):_0xc171ff(0xa0)),_0x476d30['classList'][_0xc171ff(0xd2)](_0xc171ff(0x131)),setTimeout(()=>{const _0x1663e5=_0xc171ff;_0x476d30[_0x1663e5(0x8f)][_0x1663e5(0x124)](_0x1663e5(0x131));},0xbb8);}function initializeLiff(){const _0x4b7a18=_0x284688;typeof liff!==_0x4b7a18(0xe5)?liff[_0x4b7a18(0x10e)]({'liffId':LIFF_ID,'withLoginOnExternalBrowser':!![]})[_0x4b7a18(0x165)](()=>{const _0x2040a3=_0x4b7a18;liff['isLoggedIn']()?(liff['getProfile']()['then'](_0x4d4c75=>{const _0x3cd9a9=_0x548c,_0x40d2ff=_0x4d4c75[_0x3cd9a9(0x7c)];document[_0x3cd9a9(0xb1)](_0x3cd9a9(0x117))[_0x3cd9a9(0x91)]=_0x4d4c75[_0x3cd9a9(0xda)];})[_0x2040a3(0x89)](_0x5d0833=>{const _0x17bc48=_0x2040a3;console[_0x17bc48(0x137)](_0x17bc48(0xba),_0x5d0833);}),liff[_0x2040a3(0x164)]()['then'](_0x20c6fc=>{const _0x521b1e=_0x2040a3;!_0x20c6fc['friendFlag']&&Swal[_0x521b1e(0xdd)](_0x521b1e(0x84),'คุณยังไม่ได้เป็นเพื่อนกับเรา',_0x521b1e(0xba))[_0x521b1e(0x165)](()=>{const _0x1b75ec=_0x521b1e;window['location']=_0x1b75ec(0x125);});}),fetchUserProfile()):liff[_0x2040a3(0xe4)]()?liff[_0x2040a3(0xd5)]({'redirectUri':destinationUrl}):(console[_0x2040a3(0xd3)](_0x2040a3(0xb6)),checkExistingMember());})[_0x4b7a18(0x89)](_0x329634=>{const _0x4cc709=_0x4b7a18;console[_0x4cc709(0xba)](_0x4cc709(0x98),_0x329634),checkExistingMember();}):(console[_0x4b7a18(0x137)](_0x4b7a18(0xc3)),checkExistingMember());}function fetchUserProfile(){const _0x1c7fd6=_0x284688;liff[_0x1c7fd6(0x134)]()[_0x1c7fd6(0x165)](_0x5e9477=>{const _0x4906b8=_0x1c7fd6;document[_0x4906b8(0xb1)](_0x4906b8(0xd9))[_0x4906b8(0x91)]=_0x5e9477[_0x4906b8(0xda)],document[_0x4906b8(0xb1)](_0x4906b8(0xc5))[_0x4906b8(0x91)]=_0x5e9477[_0x4906b8(0x7c)],document[_0x4906b8(0xb1)](_0x4906b8(0x154))[_0x4906b8(0x91)]=_0x5e9477[_0x4906b8(0x9c)]||_0x4906b8(0x96),_0x5e9477[_0x4906b8(0x7c)]&&!document[_0x4906b8(0xb1)](_0x4906b8(0x148))['value']&&(document[_0x4906b8(0xb1)](_0x4906b8(0x148))[_0x4906b8(0x91)]=_0x5e9477[_0x4906b8(0x7c)],document['getElementById']('email')[_0x4906b8(0x91)]=liff[_0x4906b8(0x17a)]()[_0x4906b8(0xe6)]||''),checkExistingMember();})[_0x1c7fd6(0x89)](_0x14e4c1=>{const _0x22ab23=_0x1c7fd6;console[_0x22ab23(0xba)](_0x22ab23(0x12e),_0x14e4c1),document[_0x22ab23(0xb1)](_0x22ab23(0xd9))[_0x22ab23(0x91)]='fallback-user-'+Date[_0x22ab23(0x11d)](),checkExistingMember();});}function checkExistingMember(){const _0x18ebef=_0x284688,_0x423cae=document[_0x18ebef(0xb1)](_0x18ebef(0xd9))['value'];if(!_0x423cae){showTab('register');return;}const _0x58a5ab=new URLSearchParams();_0x58a5ab[_0x18ebef(0x10b)](_0x18ebef(0x17b),_0x18ebef(0x169)),_0x58a5ab[_0x18ebef(0x10b)](_0x18ebef(0xf4),_0x423cae),fetch(API_URL,{'method':_0x18ebef(0x13c),'headers':{'Content-Type':_0x18ebef(0x166)},'body':_0x58a5ab})[_0x18ebef(0x165)](_0x255011=>_0x255011[_0x18ebef(0xa3)]())[_0x18ebef(0x165)](_0x18325c=>{const _0x16102b=_0x18ebef;_0x18325c[_0x16102b(0x81)]&&_0x18325c['exists']?(currentMember=_0x18325c[_0x16102b(0x135)],loadMemberData(_0x18325c[_0x16102b(0x135)]),showTab('points'),generateMemberQR(_0x18325c[_0x16102b(0x135)][_0x16102b(0xf4)])):showTab(_0x16102b(0x7b));})[_0x18ebef(0x89)](_0x4b6ede=>{const _0x4679f5=_0x18ebef;console[_0x4679f5(0xba)]('Error\x20checking\x20member:',_0x4b6ede),showTab(_0x4679f5(0x7b));});}function generateMemberQR(_0x4c7904){const _0x100477=_0x284688,_0x1b923a=document[_0x100477(0xb1)]('member-qr-code');_0x1b923a['innerHTML']='';if(_0x4c7904){const _0x114b14=_0x100477(0xb3)+encodeURIComponent(_0x4c7904)+_0x100477(0xf3),_0x405ce7=document[_0x100477(0x7f)]('img');_0x405ce7[_0x100477(0xec)]=_0x114b14,_0x405ce7['alt']='QR\x20Code',_0x405ce7[_0x100477(0xe2)]=0x80,_0x405ce7[_0x100477(0x83)]=0x80,_0x1b923a[_0x100477(0x138)](_0x405ce7);}else _0x1b923a[_0x100477(0x11a)]=_0x100477(0xa9);}function loadMemberData(_0x3febae){const _0x3ed75d=_0x284688;document[_0x3ed75d(0xb1)](_0x3ed75d(0x15f))[_0x3ed75d(0xff)]=_0x3febae[_0x3ed75d(0xce)][_0x3ed75d(0x12a)]()||'0',document[_0x3ed75d(0xb1)](_0x3ed75d(0x10c))['textContent']=_0x3febae[_0x3ed75d(0x148)]||'-',document[_0x3ed75d(0xb1)](_0x3ed75d(0x142))['textContent']=_0x3febae['phone']||'-',document['getElementById'](_0x3ed75d(0x118))[_0x3ed75d(0xff)]=_0x3febae[_0x3ed75d(0xe6)]||'-',document['getElementById'](_0x3ed75d(0x11c))[_0x3ed75d(0xff)]=formatDate(_0x3febae[_0x3ed75d(0x108)])+_0x3ed75d(0x112)||'-',updateHistoryTab(_0x3febae[_0x3ed75d(0xb4)]||[]);}function updateHistoryTab(_0x469a2b){const _0x20c810=_0x284688,_0x25e576=document['getElementById'](_0x20c810(0x16e)),_0x13d335=_0x25e576['querySelector'](_0x20c810(0x12c));if(_0x469a2b[_0x20c810(0xb2)]===0x0){if(_0x13d335)_0x13d335[_0x20c810(0x151)][_0x20c810(0xbc)]='block';const _0x424f2d=_0x25e576[_0x20c810(0x14f)](_0x20c810(0x10d));_0x424f2d[_0x20c810(0x121)](_0x4f2e45=>_0x4f2e45[_0x20c810(0x124)]());return;}if(_0x13d335)_0x13d335[_0x20c810(0x151)][_0x20c810(0xbc)]=_0x20c810(0x126);const _0x5c3e2f=_0x25e576[_0x20c810(0x14f)]('.history-item');_0x5c3e2f[_0x20c810(0x121)](_0x2bd6f0=>_0x2bd6f0['remove']()),_0x469a2b[_0x20c810(0x121)](_0x2d2d70=>{const _0x2e9a38=_0x20c810,_0x1f28f4=document[_0x2e9a38(0x7f)]('div');_0x1f28f4['className']=_0x2e9a38(0xfa);const _0x42557d=_0x2d2d70[_0x2e9a38(0xce)]<0x0;_0x1f28f4[_0x2e9a38(0x11a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22history-date\x22>'+formatDate(_0x2d2d70[_0x2e9a38(0x75)])+'\x20น.</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22history-points\x20'+(_0x42557d?_0x2e9a38(0x119):'')+'\x22>'+(_0x2d2d70[_0x2e9a38(0xce)]['toLocaleString']()>0x0?'+':'')+_0x2d2d70[_0x2e9a38(0xce)]['toLocaleString']()+_0x2e9a38(0xf0)+(_0x2d2d70['description']||_0x2e9a38(0xf5))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x25e576[_0x2e9a38(0x138)](_0x1f28f4);});}function formatDate(_0xbfd220){const _0x2f919e=_0x284688;if(!_0xbfd220)return'-';try{const _0x2d4199=new Date(_0xbfd220);if(isNaN(_0x2d4199[_0x2f919e(0x123)]()))return _0xbfd220;return _0x2d4199[_0x2f919e(0x140)](_0x2f919e(0xb8),{'year':_0x2f919e(0xc8),'month':_0x2f919e(0x103),'day':_0x2f919e(0xc8),'hour':_0x2f919e(0x173),'minute':_0x2f919e(0x173)});}catch(_0x4b908d){return console[_0x2f919e(0xba)](_0x2f919e(0xbe),_0xbfd220,_0x4b908d),_0xbfd220;}}function setupTabNavigation(){const _0x15986e=_0x284688;document[_0x15986e(0x14f)]('.tab')[_0x15986e(0x121)](_0x5376fb=>{const _0xe08686=_0x15986e;_0x5376fb['addEventListener'](_0xe08686(0x153),function(){const _0x482b39=_0xe08686,_0x98ac88=this[_0x482b39(0xc6)](_0x482b39(0x78));showTab(_0x98ac88);});}),document['querySelectorAll'](_0x15986e(0x82))['forEach'](_0x231fb9=>{const _0x203493=_0x15986e;_0x231fb9[_0x203493(0x86)]('click',function(){const _0x32b9e3=_0x203493,_0x273565=this[_0x32b9e3(0xc6)](_0x32b9e3(0x78));showAdminTab(_0x273565);});});}function showTab(_0x28cd35){const _0x2b692d=_0x284688;document['querySelectorAll'](_0x2b692d(0x111))[_0x2b692d(0x121)](_0x44277b=>{const _0xef2e10=_0x2b692d;_0x44277b[_0xef2e10(0x8f)][_0xef2e10(0x124)]('active'),_0x44277b[_0xef2e10(0xc6)]('data-tab')===_0x28cd35&&_0x44277b['classList'][_0xef2e10(0xd2)](_0xef2e10(0xa7));}),document[_0x2b692d(0x14f)](_0x2b692d(0x8a))[_0x2b692d(0x121)](_0x41e9b8=>{const _0x6a10a8=_0x2b692d;_0x41e9b8[_0x6a10a8(0x8f)]['remove'](_0x6a10a8(0xa7)),_0x41e9b8['id']===_0x28cd35&&_0x41e9b8[_0x6a10a8(0x8f)][_0x6a10a8(0xd2)]('active');}),(_0x28cd35===_0x2b692d(0xce)||_0x28cd35==='history')&&currentMember&&loadMemberData(currentMember);}function showAdminTab(_0x31b34d){const _0x161792=_0x284688;document[_0x161792(0x14f)](_0x161792(0x82))[_0x161792(0x121)](_0x34fe9b=>{const _0x383e6c=_0x161792;_0x34fe9b['classList'][_0x383e6c(0x124)](_0x383e6c(0xa7)),_0x34fe9b[_0x383e6c(0xc6)](_0x383e6c(0x78))===_0x31b34d&&_0x34fe9b[_0x383e6c(0x8f)][_0x383e6c(0xd2)](_0x383e6c(0xa7));}),document[_0x161792(0x14f)](_0x161792(0x8d))[_0x161792(0x121)](_0x436e3b=>{const _0x595052=_0x161792;_0x436e3b[_0x595052(0x8f)][_0x595052(0x124)](_0x595052(0xa7)),_0x436e3b['id']===_0x31b34d&&_0x436e3b[_0x595052(0x8f)][_0x595052(0xd2)](_0x595052(0xa7));}),_0x31b34d===_0x161792(0x149)&&loadAllMembers();}function setupFormSubmission(){const _0x5c2d06=_0x284688,_0x35fcc3=document[_0x5c2d06(0xb1)](_0x5c2d06(0x167));_0x35fcc3[_0x5c2d06(0x86)]('submit',function(_0x58550a){const _0x233d6e=_0x5c2d06;_0x58550a[_0x233d6e(0xc2)](),_0x35fcc3[_0x233d6e(0x151)][_0x233d6e(0xbc)]=_0x233d6e(0x126),document[_0x233d6e(0xb1)]('registration-loading')[_0x233d6e(0x8f)][_0x233d6e(0xd2)]('show');const _0x9e0fb6=new FormData(_0x35fcc3),_0x3bfeac=new URLSearchParams();_0x3bfeac[_0x233d6e(0x10b)]('action',_0x233d6e(0x7b));for(const _0x564cac of _0x9e0fb6[_0x233d6e(0xe7)]()){_0x3bfeac[_0x233d6e(0x10b)](_0x564cac[0x0],_0x564cac[0x1]);}fetch(API_URL,{'method':'POST','headers':{'Content-Type':'application/x-www-form-urlencoded'},'body':_0x3bfeac})[_0x233d6e(0x165)](_0xdeeec4=>_0xdeeec4['json']())[_0x233d6e(0x165)](_0x37365e=>{const _0x102bda=_0x233d6e;document[_0x102bda(0xb1)]('registration-loading')['classList'][_0x102bda(0x124)](_0x102bda(0x131)),_0x37365e['success']?(showAlert(_0x102bda(0x99),_0x37365e[_0x102bda(0x15e)]||'ลงทะเบียนสำเร็จ!\x20คุณได้รับแต้มเริ่มต้นแล้ว',!![]),_0x37365e[_0x102bda(0x135)]&&(currentMember=_0x37365e['member'],loadMemberData(_0x37365e[_0x102bda(0x135)]),generateMemberQR(_0x37365e[_0x102bda(0x135)]['lineId'])),setTimeout(()=>{const _0x242af2=_0x102bda;showTab(_0x242af2(0xce)),document[_0x242af2(0xb1)](_0x242af2(0x99))[_0x242af2(0x8f)]['remove']('show');},0x7d0)):(showAlert('registration-error',_0x37365e[_0x102bda(0x15e)]||_0x102bda(0x130),![]),setTimeout(()=>{const _0x45b1be=_0x102bda;_0x35fcc3[_0x45b1be(0x151)][_0x45b1be(0xbc)]='block';},0xbb8));})[_0x233d6e(0x89)](_0x3c2885=>{const _0x1fe46f=_0x233d6e;console[_0x1fe46f(0xba)](_0x1fe46f(0x152),_0x3c2885),document['getElementById']('registration-loading')[_0x1fe46f(0x8f)][_0x1fe46f(0x124)]('show'),showAlert(_0x1fe46f(0x174),_0x1fe46f(0xaf),![]),setTimeout(()=>{const _0x3b3f25=_0x1fe46f;_0x35fcc3['style'][_0x3b3f25(0xbc)]='block';},0xbb8);});});}function setupAdminFunctions(){const _0x572afc=_0x284688,_0x239dc3=document[_0x572afc(0xb1)]('admin-login-form');_0x239dc3[_0x572afc(0x86)](_0x572afc(0xb0),function(_0xc053c3){const _0x5dba3b=_0x572afc;_0xc053c3[_0x5dba3b(0xc2)]();const _0x58fed9=document[_0x5dba3b(0xb1)](_0x5dba3b(0x117))[_0x5dba3b(0x91)],_0x1722c9=document['getElementById'](_0x5dba3b(0xcd))[_0x5dba3b(0x91)],_0x2f8ab7=new URLSearchParams();_0x2f8ab7[_0x5dba3b(0x10b)]('action','adminLogin'),_0x2f8ab7[_0x5dba3b(0x10b)](_0x5dba3b(0xc1),_0x58fed9),_0x2f8ab7['append'](_0x5dba3b(0xa8),_0x1722c9),Toast['fire']({'icon':_0x5dba3b(0x15d),'title':'โปรดรอสักครู่...'}),fetch(API_URL,{'method':_0x5dba3b(0x13c),'headers':{'Content-Type':_0x5dba3b(0x166)},'body':_0x2f8ab7})[_0x5dba3b(0x165)](_0x29ceb=>_0x29ceb[_0x5dba3b(0xa3)]())[_0x5dba3b(0x165)](_0x4b2c0b=>{const _0x4b47ea=_0x5dba3b;_0x4b2c0b['success']?(isAdminLoggedIn=!![],document[_0x4b47ea(0xb1)]('admin-login')[_0x4b47ea(0x151)][_0x4b47ea(0xbc)]='none',document['getElementById']('admin-dashboard')[_0x4b47ea(0x8f)][_0x4b47ea(0xd2)](_0x4b47ea(0x131)),showAdminTab(_0x4b47ea(0x73)),loadAllMembers()):showAlert(_0x4b47ea(0x94),_0x4b2c0b[_0x4b47ea(0x15e)]||_0x4b47ea(0x161),![]);})[_0x5dba3b(0x89)](_0x470d66=>{const _0x4bfe4d=_0x5dba3b;console['error'](_0x4bfe4d(0x152),_0x470d66),showAlert(_0x4bfe4d(0x94),_0x4bfe4d(0xaf),![]);});}),document['getElementById']('logout-btn')[_0x572afc(0x86)](_0x572afc(0x153),function(){const _0x52bbe7=_0x572afc;isAdminLoggedIn=![],document[_0x52bbe7(0xb1)](_0x52bbe7(0xf1))[_0x52bbe7(0x151)]['display']=_0x52bbe7(0xae),document[_0x52bbe7(0xb1)](_0x52bbe7(0xdb))['classList'][_0x52bbe7(0x124)](_0x52bbe7(0x131)),document['getElementById'](_0x52bbe7(0x117))[_0x52bbe7(0x91)]='',document[_0x52bbe7(0xb1)]('admin-password')[_0x52bbe7(0x91)]='',document['getElementById'](_0x52bbe7(0xa1))['classList'][_0x52bbe7(0x124)](_0x52bbe7(0x168)),document[_0x52bbe7(0xb1)]('admin-mode')['classList'][_0x52bbe7(0xd2)]('hide'),document[_0x52bbe7(0xb1)](_0x52bbe7(0x102))['textContent']='Admin',currentMode=_0x52bbe7(0x135);}),document[_0x572afc(0xb1)](_0x572afc(0x15a))[_0x572afc(0x86)](_0x572afc(0x153),function(){const _0xecacec=_0x572afc,_0x20db37=document[_0xecacec(0xb1)](_0xecacec(0x74))[_0xecacec(0x91)];if(!_0x20db37||!/^[0-9]{10}$/[_0xecacec(0xbf)](_0x20db37)){Toast['fire']({'icon':_0xecacec(0x104),'title':_0xecacec(0x110)});return;}Toast['fire']({'icon':_0xecacec(0x15d),'title':_0xecacec(0x136)});const _0x412e5c=new URLSearchParams();_0x412e5c[_0xecacec(0x10b)](_0xecacec(0x17b),_0xecacec(0x13b)),_0x412e5c[_0xecacec(0x10b)](_0xecacec(0xac),_0x20db37),fetch(API_URL,{'method':_0xecacec(0x13c),'headers':{'Content-Type':_0xecacec(0x166)},'body':_0x412e5c})[_0xecacec(0x165)](_0x270daf=>_0x270daf[_0xecacec(0xa3)]())[_0xecacec(0x165)](_0x13c206=>{const _0x531d79=_0xecacec;_0x13c206[_0x531d79(0x81)]&&_0x13c206['member']?displayMemberResult(_0x13c206['member']):(Toast[_0x531d79(0xdd)]({'icon':_0x531d79(0xba),'title':_0x531d79(0xb5)}),document[_0x531d79(0xb1)](_0x531d79(0xfc))['classList'][_0x531d79(0xd2)](_0x531d79(0x168)));})[_0xecacec(0x89)](_0x2d3960=>{const _0x4175c2=_0xecacec;console[_0x4175c2(0xba)]('Error:',_0x2d3960),alert(_0x4175c2(0xd4)),document['getElementById'](_0x4175c2(0xfc))[_0x4175c2(0x8f)]['add'](_0x4175c2(0x168));});}),document[_0x572afc(0xb1)](_0x572afc(0xe0))[_0x572afc(0x86)](_0x572afc(0x153),function(){const _0x36f618=_0x572afc;if(typeof liff!==_0x36f618(0xe5)&&liff['isInClient']()){const _0x357e74=liff[_0x36f618(0x158)]();(_0x357e74==='ios'||_0x357e74===_0x36f618(0x160))&&liff[_0x36f618(0x9f)]()[_0x36f618(0x165)](_0x1628c3=>{const _0x204bf6=_0x36f618,_0x9ff4bc=_0x1628c3['value'];try{const _0xfe18d=JSON[_0x204bf6(0x146)](atob(_0x9ff4bc));if(_0xfe18d['type']==='addPoints'){if(!document[_0x204bf6(0xb1)](_0x204bf6(0xca))[_0x204bf6(0x91)]){alert('กรุณาค้นหาสมาชิกก่อนที่จะใช้\x20QR\x20Code\x20แต้มสะสม');return;}displayScanResult(_0xfe18d);return;}}catch(_0x3de380){Toast[_0x204bf6(0xdd)]({'icon':_0x204bf6(0xba),'title':'ไม่ได้ทำการ\x20Scan\x20QR\x20โปรดลองใหม่อีกครั้ง!'});}Swal[_0x204bf6(0xdd)]({'title':_0x204bf6(0xf8),'text':_0x204bf6(0x143),'allowOutsideClick':![],'didOpen':()=>{const _0x3d183b=_0x204bf6;Swal[_0x3d183b(0x175)]();}});const _0x15127b=new URLSearchParams();_0x15127b['append'](_0x204bf6(0x17b),_0x204bf6(0x169)),_0x15127b['append'](_0x204bf6(0xf4),_0x9ff4bc),fetch(API_URL,{'method':_0x204bf6(0x13c),'headers':{'Content-Type':_0x204bf6(0x166)},'body':_0x15127b})[_0x204bf6(0x165)](_0x2ed842=>_0x2ed842['json']())[_0x204bf6(0x165)](_0xc972a1=>{const _0x32d4d5=_0x204bf6;_0xc972a1[_0x32d4d5(0x81)]&&_0xc972a1['exists']?(Toast['fire']({'icon':_0x32d4d5(0x81),'title':_0x32d4d5(0x129)}),displayMemberResult(_0xc972a1[_0x32d4d5(0x135)])):Toast['fire']({'icon':_0x32d4d5(0xba),'title':_0x32d4d5(0xbb)});})[_0x204bf6(0x89)](_0x5ab79d=>{const _0x28f780=_0x204bf6;console['error'](_0x28f780(0x76),_0x5ab79d),alert(_0x28f780(0xf2));});})[_0x36f618(0x89)](_0x4dea7b=>{const _0x5d8cd4=_0x36f618;console['error']('Error\x20scanning\x20code\x20(admin):',_0x4dea7b),_0x4dea7b[_0x5d8cd4(0xcc)]!=='SCAN_CANCELED'&&alert(_0x5d8cd4(0x88));}),_0x357e74===_0x36f618(0x16c)&&liff[_0x36f618(0x13a)]()[_0x36f618(0x165)](_0x382dcd=>{const _0x2a5f05=_0x36f618,_0x339c52=_0x382dcd[_0x2a5f05(0x91)];try{const _0x2efe28=JSON[_0x2a5f05(0x146)](atob(_0x339c52));if(_0x2efe28[_0x2a5f05(0x106)]===_0x2a5f05(0x162)){if(!document['getElementById'](_0x2a5f05(0xca))[_0x2a5f05(0x91)]){alert(_0x2a5f05(0x179));return;}displayScanResult(_0x2efe28);return;}}catch(_0x39ea77){}Swal['fire']({'title':_0x2a5f05(0xf8),'text':_0x2a5f05(0x143),'allowOutsideClick':![],'didOpen':()=>{const _0x1a4e2f=_0x2a5f05;Swal[_0x1a4e2f(0x175)]();}});const _0x2fe1ab=new URLSearchParams();_0x2fe1ab['append'](_0x2a5f05(0x17b),'checkMember'),_0x2fe1ab[_0x2a5f05(0x10b)]('lineId',_0x339c52),fetch(API_URL,{'method':_0x2a5f05(0x13c),'headers':{'Content-Type':'application/x-www-form-urlencoded'},'body':_0x2fe1ab})[_0x2a5f05(0x165)](_0x19095c=>_0x19095c[_0x2a5f05(0xa3)]())[_0x2a5f05(0x165)](_0x31c6fe=>{const _0x397daf=_0x2a5f05;_0x31c6fe[_0x397daf(0x81)]&&_0x31c6fe[_0x397daf(0x114)]?(Toast[_0x397daf(0xdd)]({'icon':'success','title':_0x397daf(0x129)}),displayMemberResult(_0x31c6fe[_0x397daf(0x135)])):alert(_0x397daf(0xbb));})[_0x2a5f05(0x89)](_0x3c3e=>{const _0x29a606=_0x2a5f05;console[_0x29a606(0xba)](_0x29a606(0x76),_0x3c3e),alert(_0x29a606(0xf2));});})[_0x36f618(0x89)](_0x2adede=>{const _0x623545=_0x36f618;console[_0x623545(0xba)](_0x623545(0xeb),_0x2adede),_0x2adede[_0x623545(0xcc)]!==_0x623545(0x113)&&alert(_0x623545(0x88));});}else alert('ฟังก์ชันสแกน\x20QR\x20Code\x20ใช้ได้เฉพาะใน\x20LINE\x20เท่านั้น');}),document[_0x572afc(0xb1)]('add-points-form-admin')[_0x572afc(0x86)](_0x572afc(0xb0),function(_0x550086){const _0x3549aa=_0x572afc;_0x550086[_0x3549aa(0xc2)]();const _0x1f0194=document['getElementById'](_0x3549aa(0xca))[_0x3549aa(0x91)],_0x400220=document['getElementById']('points-amount')['value'],_0x1b9fb6=document[_0x3549aa(0xb1)](_0x3549aa(0xfe))[_0x3549aa(0x91)];if(!_0x1f0194){Toast[_0x3549aa(0xdd)]({'icon':_0x3549aa(0x104),'title':_0x3549aa(0xe3)});return;}if(!_0x400220||parseInt(_0x400220)<=0x0){alert('กรุณากรอกจำนวนแต้มที่ถูกต้อง');return;}Swal[_0x3549aa(0xdd)]({'title':'กำลังโหลด..','text':_0x3549aa(0x143),'allowOutsideClick':![],'didOpen':()=>{const _0x591205=_0x3549aa;Swal[_0x591205(0x175)]();}});const _0x2fb3f2=new URLSearchParams();_0x2fb3f2['append'](_0x3549aa(0x17b),_0x3549aa(0x162)),_0x2fb3f2[_0x3549aa(0x10b)](_0x3549aa(0xf4),_0x1f0194),_0x2fb3f2['append'](_0x3549aa(0xce),_0x400220),_0x2fb3f2[_0x3549aa(0x10b)]('description',_0x1b9fb6||_0x3549aa(0xd6)+liff['getDecodedIDToken']()[_0x3549aa(0x148)]),fetch(API_URL,{'method':_0x3549aa(0x13c),'headers':{'Content-Type':'application/x-www-form-urlencoded'},'body':_0x2fb3f2})[_0x3549aa(0x165)](_0x3ab49b=>_0x3ab49b[_0x3549aa(0xa3)]())[_0x3549aa(0x165)](_0x37a0f7=>{const _0x12fd3d=_0x3549aa;_0x37a0f7[_0x12fd3d(0x81)]&&_0x37a0f7[_0x12fd3d(0x135)]?(Toast['fire']({'icon':_0x12fd3d(0x81),'title':_0x12fd3d(0x7e)}),displayMemberResult(_0x37a0f7[_0x12fd3d(0x135)]),document[_0x12fd3d(0xb1)](_0x12fd3d(0xa6))['value']='',document[_0x12fd3d(0xb1)](_0x12fd3d(0xfe))[_0x12fd3d(0x91)]=''):alert(_0x37a0f7['message']||_0x12fd3d(0xc7));})[_0x3549aa(0x89)](_0x2ca937=>{const _0x2b5454=_0x3549aa;console[_0x2b5454(0xba)]('Error:',_0x2ca937),alert(_0x2b5454(0xc7));});}),document[_0x572afc(0xb1)](_0x572afc(0x127))['addEventListener'](_0x572afc(0xb0),function(_0x5c8d14){const _0x21399c=_0x572afc;_0x5c8d14[_0x21399c(0xc2)]();const _0x1cfdee=document[_0x21399c(0xb1)]('qr-points')['value'],_0x2eb82b=document[_0x21399c(0xb1)]('qr-desc')[_0x21399c(0x91)],_0x16e0f3=document[_0x21399c(0xb1)](_0x21399c(0x9d))[_0x21399c(0x91)];if(!_0x1cfdee||parseInt(_0x1cfdee)<=0x0){alert(_0x21399c(0xbd));return;}const _0x182c04={'type':'addPoints','points':parseInt(_0x1cfdee),'description':_0x2eb82b,'expiry':_0x16e0f3||'','generated':new Date()[_0x21399c(0x156)]()},_0xd4e8f4=utf8ToBase64(JSON[_0x21399c(0xdc)](_0x182c04)),_0xc91655='https://api.qrserver.com/v1/create-qr-code/?data='+encodeURIComponent(_0xd4e8f4)+_0x21399c(0x101),_0x596057=document[_0x21399c(0xb1)](_0x21399c(0x87));_0x596057['innerHTML']='';const _0x30a5a0=document['createElement'](_0x21399c(0x16b));_0x30a5a0['src']=_0xc91655,_0x30a5a0[_0x21399c(0x97)]=_0x21399c(0x79),_0x30a5a0[_0x21399c(0xe2)]=0xc8,_0x30a5a0[_0x21399c(0x83)]=0xc8,_0x596057[_0x21399c(0x138)](_0x30a5a0),document['getElementById'](_0x21399c(0x178))[_0x21399c(0x8f)]['remove'](_0x21399c(0x168));}),document[_0x572afc(0xb1)](_0x572afc(0xfd))[_0x572afc(0x86)](_0x572afc(0x153),function(){const _0x3dbdf9=_0x572afc,_0x2f14b4=document[_0x3dbdf9(0x157)](_0x3dbdf9(0xcf));if(_0x2f14b4){const _0x5a4795=_0x2f14b4[_0x3dbdf9(0x147)]('image/png'),_0xf3447d=document[_0x3dbdf9(0x7f)]('a');_0xf3447d['href']=_0x5a4795,_0xf3447d[_0x3dbdf9(0x15b)]=_0x3dbdf9(0x141)+(document[_0x3dbdf9(0xb1)](_0x3dbdf9(0x12d))['value']||'custom')+_0x3dbdf9(0xed),_0xf3447d[_0x3dbdf9(0x153)]();}else{if(document[_0x3dbdf9(0x157)](_0x3dbdf9(0xf7))){const _0x34423c=document['querySelector']('#generated-qr-code\x20img'),_0x5d9901=document[_0x3dbdf9(0x7f)]('a');_0x5d9901[_0x3dbdf9(0x95)]=_0x34423c[_0x3dbdf9(0xec)],_0x5d9901[_0x3dbdf9(0x15b)]=_0x3dbdf9(0x141)+(document[_0x3dbdf9(0xb1)](_0x3dbdf9(0x12d))[_0x3dbdf9(0x91)]||_0x3dbdf9(0x14c))+_0x3dbdf9(0xed),_0x5d9901['click']();}else alert(_0x3dbdf9(0x77));}}),document[_0x572afc(0xb1)](_0x572afc(0x90))['addEventListener'](_0x572afc(0x153),function(){const _0x98e848=_0x572afc,_0x3cdb29=document[_0x98e848(0xb1)]('member-line-id')['value'],_0x419ba0=document['getElementById']('scanned-points')[_0x98e848(0xff)],_0x206b10=document['getElementById'](_0x98e848(0x80))['textContent'];if(!_0x3cdb29){alert(_0x98e848(0xfb));return;}if(!_0x419ba0||parseInt(_0x419ba0)<=0x0){alert(_0x98e848(0x92));return;}const _0x36d938=new URLSearchParams();_0x36d938['append'](_0x98e848(0x17b),_0x98e848(0x162)),_0x36d938[_0x98e848(0x10b)](_0x98e848(0xf4),_0x3cdb29),_0x36d938[_0x98e848(0x10b)](_0x98e848(0xce),_0x419ba0),_0x36d938[_0x98e848(0x10b)]('description',_0x206b10),fetch(API_URL,{'method':_0x98e848(0x13c),'headers':{'Content-Type':'application/x-www-form-urlencoded'},'body':_0x36d938})['then'](_0x53417f=>_0x53417f[_0x98e848(0xa3)]())[_0x98e848(0x165)](_0x8333a4=>{const _0x9ec64c=_0x98e848;_0x8333a4['success']&&_0x8333a4[_0x9ec64c(0x135)]?(alert('เพิ่มแต้มสำเร็จ'),displayMemberResult(_0x8333a4['member']),document[_0x9ec64c(0xb1)](_0x9ec64c(0x15c))[_0x9ec64c(0x8f)][_0x9ec64c(0xd2)](_0x9ec64c(0x168))):alert(_0x8333a4[_0x9ec64c(0x15e)]||_0x9ec64c(0xc7));})[_0x98e848(0x89)](_0xa049d2=>{const _0x468a6a=_0x98e848;console[_0x468a6a(0xba)](_0x468a6a(0xa4),_0xa049d2),alert('เกิดข้อผิดพลาดในการเพิ่มแต้ม');});});}function displayMemberResult(_0x2e42fa){const _0x523eb7=_0x284688;document['getElementById'](_0x523eb7(0x109))[_0x523eb7(0xff)]=_0x2e42fa['name'],document['getElementById'](_0x523eb7(0x12f))[_0x523eb7(0xff)]=_0x2e42fa['points'][_0x523eb7(0x12a)](),document['getElementById']('result-phone')[_0x523eb7(0xff)]=_0x2e42fa['phone'],document['getElementById'](_0x523eb7(0x9a))['textContent']=_0x2e42fa['email']||'-',document[_0x523eb7(0xb1)](_0x523eb7(0xca))['value']=_0x2e42fa[_0x523eb7(0xf4)],document[_0x523eb7(0xb1)](_0x523eb7(0xfc))[_0x523eb7(0x8f)][_0x523eb7(0x124)](_0x523eb7(0x168)),document[_0x523eb7(0xb1)](_0x523eb7(0x15c))[_0x523eb7(0x8f)][_0x523eb7(0xd2)](_0x523eb7(0x168));}function displayScanResult(_0x226868){const _0x581fe5=_0x284688;document[_0x581fe5(0xb1)](_0x581fe5(0x13d))['textContent']=_0x226868[_0x581fe5(0xce)][_0x581fe5(0x12a)](),document[_0x581fe5(0xb1)](_0x581fe5(0x80))[_0x581fe5(0xff)]=_0x226868[_0x581fe5(0x128)],document[_0x581fe5(0xb1)](_0x581fe5(0x15c))[_0x581fe5(0x8f)][_0x581fe5(0x124)](_0x581fe5(0x168));}function setupMemberScanQRButton(){const _0x172571=_0x284688;document[_0x172571(0xb1)](_0x172571(0x122))[_0x172571(0x86)](_0x172571(0x153),function(){const _0x240cd0=_0x172571;if(!currentMember||!currentMember['lineId']){showAlert(_0x240cd0(0x133),_0x240cd0(0x13e),![]);return;}if(typeof liff!==_0x240cd0(0xe5)&&liff[_0x240cd0(0xe4)]()){const _0x129316=liff[_0x240cd0(0x158)]();(_0x129316===_0x240cd0(0x14d)||_0x129316===_0x240cd0(0x160))&&liff[_0x240cd0(0x9f)]()[_0x240cd0(0x165)](_0x3273ef=>{const _0x4c1feb=_0x240cd0,_0x4eda8a=_0x3273ef[_0x4c1feb(0x91)];try{const _0x1f3014=JSON[_0x4c1feb(0x146)](base64ToUtf8(_0x3273ef[_0x4c1feb(0x91)]));Swal[_0x4c1feb(0xdd)]({'title':_0x4c1feb(0xf8),'text':_0x4c1feb(0x143),'allowOutsideClick':![],'didOpen':()=>{const _0x49adc4=_0x4c1feb;Swal[_0x49adc4(0x175)]();}});if(_0x1f3014[_0x4c1feb(0x106)]===_0x4c1feb(0x162)&&_0x1f3014['points']){if(_0x1f3014['expiry']){const _0x591f30=new Date(_0x1f3014[_0x4c1feb(0xb7)]),_0x817e5a=new Date();_0x817e5a[_0x4c1feb(0xad)](0x0,0x0,0x0,0x0);if(_0x591f30<_0x817e5a){Toast[_0x4c1feb(0xdd)]({'icon':_0x4c1feb(0xba),'title':_0x4c1feb(0x16f)});return;}}const _0x51efd5=new URLSearchParams();_0x51efd5[_0x4c1feb(0x10b)](_0x4c1feb(0x17b),'addPoints'),_0x51efd5[_0x4c1feb(0x10b)](_0x4c1feb(0xf4),currentMember[_0x4c1feb(0xf4)]),_0x51efd5['append'](_0x4c1feb(0xce),_0x1f3014[_0x4c1feb(0xce)]),_0x51efd5[_0x4c1feb(0x10b)]('description',_0x1f3014[_0x4c1feb(0x128)]||_0x4c1feb(0x107)),fetch(API_URL,{'method':_0x4c1feb(0x13c),'headers':{'Content-Type':_0x4c1feb(0x166)},'body':_0x51efd5})[_0x4c1feb(0x165)](_0x55544a=>_0x55544a[_0x4c1feb(0xa3)]())[_0x4c1feb(0x165)](_0x353f03=>{const _0x98d4b9=_0x4c1feb;if(_0x353f03[_0x98d4b9(0x81)]&&_0x353f03[_0x98d4b9(0x135)]){currentMember=_0x353f03[_0x98d4b9(0x135)],loadMemberData(currentMember),Toast[_0x98d4b9(0xdd)]({'icon':'success','title':_0x98d4b9(0xdf)+_0x1f3014[_0x98d4b9(0xce)][_0x98d4b9(0x12a)]()+_0x98d4b9(0xe9)}),showTab(_0x98d4b9(0xb4));const _0x25cca1=JSON[_0x98d4b9(0x146)](_0x353f03[_0x98d4b9(0x15e)]);sendText([_0x25cca1]);}else Toast['fire']({'icon':'error','title':_0x98d4b9(0x150)});})[_0x4c1feb(0x89)](_0x2c31ec=>{const _0x48328d=_0x4c1feb;console['error']('Error\x20adding\x20points\x20from\x20member\x20scan:',_0x2c31ec),showAlert(_0x48328d(0x133),_0x48328d(0x12b),![]);});}else showAlert('member-scan-error',_0x4c1feb(0x144),![]);}catch(_0x3fc8a6){console[_0x4c1feb(0xba)]('Error\x20parsing\x20scanned\x20QR\x20for\x20member:',_0x3fc8a6),showAlert(_0x4c1feb(0x133),_0x4c1feb(0x8b),![]);}})['catch'](_0x17b19a=>{const _0xac8307=_0x240cd0;console[_0xac8307(0xba)](_0xac8307(0xaa),_0x17b19a),_0x17b19a[_0xac8307(0xcc)]!==_0xac8307(0x113)&&showAlert(_0xac8307(0x133),_0xac8307(0x88),![]);}),_0x129316===_0x240cd0(0x16c)&&liff[_0x240cd0(0x13a)]()['then'](_0x3cd8fa=>{const _0x3a2ea9=_0x240cd0,_0x2c8b24=_0x3cd8fa['value'];try{const _0x3b7b0c=JSON[_0x3a2ea9(0x146)](base64ToUtf8(_0x3cd8fa[_0x3a2ea9(0x91)]));Swal[_0x3a2ea9(0xdd)]({'title':_0x3a2ea9(0xf8),'text':_0x3a2ea9(0x143),'allowOutsideClick':![],'didOpen':()=>{const _0x5dc198=_0x3a2ea9;Swal[_0x5dc198(0x175)]();}});if(_0x3b7b0c['type']===_0x3a2ea9(0x162)&&_0x3b7b0c[_0x3a2ea9(0xce)]){if(_0x3b7b0c['expiry']){const _0x4b3718=new Date(_0x3b7b0c[_0x3a2ea9(0xb7)]),_0x4634ff=new Date();_0x4634ff[_0x3a2ea9(0xad)](0x0,0x0,0x0,0x0);if(_0x4b3718<_0x4634ff){Toast[_0x3a2ea9(0xdd)]({'icon':_0x3a2ea9(0xba),'title':_0x3a2ea9(0x16f)});return;}}const _0x29d1f7=new URLSearchParams();_0x29d1f7[_0x3a2ea9(0x10b)](_0x3a2ea9(0x17b),_0x3a2ea9(0x162)),_0x29d1f7[_0x3a2ea9(0x10b)](_0x3a2ea9(0xf4),currentMember[_0x3a2ea9(0xf4)]),_0x29d1f7['append'](_0x3a2ea9(0xce),_0x3b7b0c[_0x3a2ea9(0xce)]),_0x29d1f7['append'](_0x3a2ea9(0x128),_0x3b7b0c[_0x3a2ea9(0x128)]||'รับแต้มจาก\x20QR\x20Code'),fetch(API_URL,{'method':_0x3a2ea9(0x13c),'headers':{'Content-Type':_0x3a2ea9(0x166)},'body':_0x29d1f7})['then'](_0x48b264=>_0x48b264['json']())[_0x3a2ea9(0x165)](_0x4c6d59=>{const _0x2f4265=_0x3a2ea9;if(_0x4c6d59[_0x2f4265(0x81)]&&_0x4c6d59[_0x2f4265(0x135)]){currentMember=_0x4c6d59[_0x2f4265(0x135)],loadMemberData(currentMember),Toast[_0x2f4265(0xdd)]({'icon':_0x2f4265(0x81),'title':'รับ\x20'+_0x3b7b0c[_0x2f4265(0xce)][_0x2f4265(0x12a)]()+_0x2f4265(0xe9)}),showTab(_0x2f4265(0xb4));const _0x36d1e1=JSON[_0x2f4265(0x146)](_0x4c6d59[_0x2f4265(0x15e)]);sendText([_0x36d1e1]);}else Toast[_0x2f4265(0xdd)]({'icon':_0x2f4265(0xba),'title':_0x2f4265(0x150)});})[_0x3a2ea9(0x89)](_0x2d0b63=>{const _0x503eb1=_0x3a2ea9;console[_0x503eb1(0xba)](_0x503eb1(0x14b),_0x2d0b63),showAlert(_0x503eb1(0x133),_0x503eb1(0x12b),![]);});}else showAlert(_0x3a2ea9(0x133),_0x3a2ea9(0x144),![]);}catch(_0x2f2709){console['error'](_0x3a2ea9(0x120),_0x2f2709),showAlert(_0x3a2ea9(0x133),'ไม่สามารถอ่านข้อมูลจาก\x20QR\x20Code\x20ได้',![]);}})[_0x240cd0(0x89)](_0x5ec8e6=>{const _0x4431ca=_0x240cd0;console[_0x4431ca(0xba)](_0x4431ca(0xaa),_0x5ec8e6),_0x5ec8e6[_0x4431ca(0xcc)]!==_0x4431ca(0x113)&&showAlert(_0x4431ca(0x133),_0x4431ca(0x88),![]);});}else alert(_0x240cd0(0xd8));});}function base64ToUtf8(_0x6af7c){const _0x138a1a=_0x284688,_0x1b8764=atob(_0x6af7c),_0x4160fc=new Uint8Array([..._0x1b8764][_0x138a1a(0x139)](_0x440396=>_0x440396[_0x138a1a(0xef)](0x0))),_0x30f501=new TextDecoder();return _0x30f501[_0x138a1a(0x8c)](_0x4160fc);}function utf8ToBase64(_0x58e0ab){const _0x5830ee=_0x284688,_0x43fd1f=new TextEncoder(),_0x53e541=_0x43fd1f['encode'](_0x58e0ab);let _0x6328ec='';return _0x53e541['forEach'](_0xd6d1a1=>_0x6328ec+=String[_0x5830ee(0xa5)](_0xd6d1a1)),btoa(_0x6328ec);}function loadAllMembers(){const _0x4c1d26=_0x284688;if(!isAdminLoggedIn)return;const _0x550860=new URLSearchParams();_0x550860[_0x4c1d26(0x10b)](_0x4c1d26(0x17b),_0x4c1d26(0x11e));const _0x47b0fd=document[_0x4c1d26(0xb1)]('members-table-body');_0x47b0fd[_0x4c1d26(0x11a)]='<tr><td\x20colspan=\x225\x22\x20style=\x22text-align:center;\x20padding:20px;\x22><div\x20class=\x22spinner\x22\x20style=\x22margin:0\x20auto;\x22></div>กำลังโหลด...</td></tr>',fetch(API_URL,{'method':'POST','headers':{'Content-Type':_0x4c1d26(0x166)},'body':_0x550860})['then'](_0x572a15=>_0x572a15['json']())[_0x4c1d26(0x165)](_0x2e51f3=>{const _0x3c9a84=_0x4c1d26;_0x47b0fd[_0x3c9a84(0x11a)]='';if(_0x2e51f3['success']&&_0x2e51f3[_0x3c9a84(0xa2)]){if(_0x2e51f3[_0x3c9a84(0xa2)][_0x3c9a84(0xb2)]===0x0){_0x47b0fd[_0x3c9a84(0x11a)]=_0x3c9a84(0x177);return;}_0x2e51f3[_0x3c9a84(0xa2)][_0x3c9a84(0x121)](_0x4786dc=>{const _0x59fabf=_0x3c9a84,_0x567321=document[_0x59fabf(0x7f)]('tr');_0x567321[_0x59fabf(0x11a)]=_0x59fabf(0xc4)+(_0x4786dc['name']||'-')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4786dc[_0x59fabf(0xac)]||'-')+_0x59fabf(0xf6)+(_0x4786dc['email']||'-')+_0x59fabf(0xf6)+(formatDate(_0x4786dc[_0x59fabf(0x108)])||'-')+_0x59fabf(0xea)+(_0x4786dc[_0x59fabf(0xce)][_0x59fabf(0x12a)]()||'0')+_0x59fabf(0xee),_0x47b0fd[_0x59fabf(0x138)](_0x567321);});}else _0x47b0fd['innerHTML']=_0x3c9a84(0x14e)+(_0x2e51f3[_0x3c9a84(0x15e)]||_0x3c9a84(0xf9))+'</td></tr>',console[_0x3c9a84(0xba)](_0x3c9a84(0x9b),_0x2e51f3[_0x3c9a84(0x15e)]);})['catch'](_0x5d148c=>{const _0xe7e0d8=_0x4c1d26;_0x47b0fd[_0xe7e0d8(0x11a)]=_0xe7e0d8(0x16d),console[_0xe7e0d8(0xba)](_0xe7e0d8(0xd7),_0x5d148c);});}function setupModeSwitch(){const _0x4c7f7b=_0x284688;document[_0x4c7f7b(0xb1)](_0x4c7f7b(0x105))[_0x4c7f7b(0x86)](_0x4c7f7b(0x153),function(){const _0x5e7d16=_0x4c7f7b;document[_0x5e7d16(0x14f)](_0x5e7d16(0x100))['forEach'](_0x529e9b=>_0x529e9b[_0x5e7d16(0x8f)][_0x5e7d16(0x124)](_0x5e7d16(0x131))),currentMode==='member'?(document['getElementById'](_0x5e7d16(0xa1))[_0x5e7d16(0x8f)]['add'](_0x5e7d16(0x168)),document['getElementById'](_0x5e7d16(0xb9))[_0x5e7d16(0x8f)][_0x5e7d16(0x124)]('hide'),document[_0x5e7d16(0xb1)](_0x5e7d16(0x102))[_0x5e7d16(0xff)]=_0x5e7d16(0x163),currentMode=_0x5e7d16(0x10f),!isAdminLoggedIn?(document[_0x5e7d16(0xb1)](_0x5e7d16(0xf1))[_0x5e7d16(0x151)]['display']=_0x5e7d16(0xae),document[_0x5e7d16(0xb1)](_0x5e7d16(0xdb))[_0x5e7d16(0x8f)][_0x5e7d16(0x124)](_0x5e7d16(0x131))):(document[_0x5e7d16(0xb1)](_0x5e7d16(0xf1))['style']['display']='none',document[_0x5e7d16(0xb1)](_0x5e7d16(0xdb))['classList']['add'](_0x5e7d16(0x131)),showAdminTab(_0x5e7d16(0x73)))):(document[_0x5e7d16(0xb1)](_0x5e7d16(0xa1))[_0x5e7d16(0x8f)][_0x5e7d16(0x124)](_0x5e7d16(0x168)),document[_0x5e7d16(0xb1)](_0x5e7d16(0xb9))[_0x5e7d16(0x8f)][_0x5e7d16(0xd2)]('hide'),document[_0x5e7d16(0xb1)]('mode-text')[_0x5e7d16(0xff)]=_0x5e7d16(0xc9),currentMode=_0x5e7d16(0x135),currentMember?showTab('points'):showTab(_0x5e7d16(0x7b)));});}document[_0x284688(0xb1)](_0x284688(0x145))[_0x284688(0x86)](_0x284688(0x153),function(){const _0x5d9e23=_0x284688,_0x163d9d=document['getElementById'](_0x5d9e23(0xcd)),_0x4cb92f=_0x163d9d[_0x5d9e23(0x106)]===_0x5d9e23(0xa8);_0x163d9d[_0x5d9e23(0x106)]=_0x4cb92f?_0x5d9e23(0xd0):_0x5d9e23(0xa8),this[_0x5d9e23(0xff)]=_0x4cb92f?'🙈':'🙉';});function _0x548c(_0x1edfff,_0x248547){const _0x512945=_0x5129();return _0x548c=function(_0x548c86,_0x1abc5a){_0x548c86=_0x548c86-0x73;let _0x5e4008=_0x512945[_0x548c86];return _0x5e4008;},_0x548c(_0x1edfff,_0x248547);}function sendText(_0x278225){!liff['isInClient']()?shareTargetPicker(_0x278225):sendflex(_0x278225);}function sendflex(_0x4efcfb){const _0xd8c15d=_0x284688;liff['sendMessages'](_0x4efcfb)[_0xd8c15d(0x165)](function(){const _0x18672d=_0xd8c15d;console[_0x18672d(0x137)](_0x18672d(0xe8));});}function shareTargetPicker(_0xaf6e32){const _0x56d514=_0x284688;liff[_0x56d514(0x176)](_0xaf6e32)[_0x56d514(0x165)](function(_0x2b0ac7){const _0x437dec=_0x56d514;if(_0x2b0ac7){const _0x2c6257=Swal[_0x437dec(0x14a)]({'toast':!![],'position':_0x437dec(0x172),'showConfirmButton':![],'timer':0xbb8,'timerProgressBar':!![],'didOpen':_0x37bc64=>{const _0x457426=_0x437dec;_0x37bc64['onmouseenter']=Swal['stopTimer'],_0x37bc64['onmouseleave']=Swal[_0x457426(0x16a)];}});_0x2c6257[_0x437dec(0xdd)]({'icon':_0x437dec(0x81),'title':_0x437dec(0x170)});}else console['log'](_0x437dec(0x85));})['catch'](function(_0x199c10){const _0x362c36=_0x56d514;window[_0x362c36(0x132)]('Failed\x20to\x20send\x20message\x20'+_0x199c10);});}
    </script>
</body>


</html>
